<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Student List ‚Äì English Quest</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --purple: #7C3AED;
      --purple-light: #A78BFA;
      --purple-soft: #EDE9FE;
      --purple-mid: #C4B5FD;
      --white: #FFFFFF;
      --off-white: #F9F7FF;
      --text-dark: #1E1040;
      --text-muted: #6B5B95;
      --border: #E5DEFF;
      --accent: #F59E0B;
    }

    body {
      font-family: 'IBM Plex Sans', sans-serif;
      background: var(--off-white);
      color: var(--text-dark);
      min-height: 100vh;
    }

    /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
    header {
      background: linear-gradient(135deg, #7C3AED 0%, #5B21B6 50%, #4C1D95 100%);
      padding: 36px 24px 48px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    header::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: radial-gradient(circle, rgba(255,255,255,0.10) 1px, transparent 1px);
      background-size: 28px 28px;
      pointer-events: none;
    }

    .back-btn {
      position: absolute;
      top: 20px; left: 20px;
      background: rgba(255,255,255,0.15);
      border: 1px solid rgba(255,255,255,0.25);
      color: #fff;
      font-family: 'IBM Plex Sans', sans-serif;
      font-size: 0.82rem;
      font-weight: 500;
      padding: 7px 16px;
      border-radius: 999px;
      text-decoration: none;
      transition: background 0.2s;
      z-index: 2;
    }
    .back-btn:hover { background: rgba(255,255,255,0.25); }

    header h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.8rem, 4vw, 2.8rem);
      font-weight: 800;
      color: #fff;
      position: relative;
      z-index: 1;
    }

    header h1 span { color: var(--accent); }

    .header-sub {
      color: rgba(255,255,255,0.7);
      font-size: 0.9rem;
      margin-top: 8px;
      position: relative;
      z-index: 1;
    }

    /* ‚îÄ‚îÄ WAVE ‚îÄ‚îÄ */
    .wave { display: block; width: 100%; margin-top: -2px; }

    /* ‚îÄ‚îÄ SEARCH + FILTER ‚îÄ‚îÄ */
    .controls {
      max-width: 900px;
      margin: 32px auto 0;
      padding: 0 24px;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
    }

    .search-wrap {
      flex: 1;
      min-width: 220px;
      position: relative;
    }

    .search-wrap input {
      width: 100%;
      padding: 11px 16px 11px 40px;
      border: 1.5px solid var(--border);
      border-radius: 12px;
      font-family: 'IBM Plex Sans', sans-serif;
      font-size: 0.9rem;
      background: var(--white);
      color: var(--text-dark);
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .search-wrap input:focus {
      border-color: var(--purple-light);
      box-shadow: 0 0 0 3px rgba(124,58,237,0.1);
    }

    .search-wrap::before {
      content: 'üîç';
      position: absolute;
      left: 13px; top: 50%;
      transform: translateY(-50%);
      font-size: 14px;
      pointer-events: none;
    }

    .filter-select {
      padding: 11px 16px;
      border: 1.5px solid var(--border);
      border-radius: 12px;
      font-family: 'IBM Plex Sans', sans-serif;
      font-size: 0.88rem;
      background: var(--white);
      color: var(--text-dark);
      outline: none;
      cursor: pointer;
      transition: border-color 0.2s;
    }

    .filter-select:focus { border-color: var(--purple-light); }

    .count-badge {
      background: var(--purple-soft);
      color: var(--purple);
      font-size: 0.8rem;
      font-weight: 600;
      padding: 6px 14px;
      border-radius: 999px;
      white-space: nowrap;
    }

    /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
    main {
      max-width: 900px;
      margin: 28px auto 80px;
      padding: 0 24px;
    }

    /* ‚îÄ‚îÄ CLASS SECTION ‚îÄ‚îÄ */
    .class-section { margin-bottom: 40px; }

    .class-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 14px;
    }

    .class-badge {
      background: linear-gradient(135deg, var(--purple), var(--purple-light));
      color: #fff;
      font-family: 'Playfair Display', serif;
      font-size: 0.85rem;
      font-weight: 700;
      padding: 5px 16px;
      border-radius: 999px;
    }

    .class-count {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    /* ‚îÄ‚îÄ LIST ‚îÄ‚îÄ */
    .student-list {
      background: var(--white);
      border: 1.5px solid var(--border);
      border-radius: 16px;
      overflow: hidden;
    }

    .student-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 13px 20px;
      border-bottom: 1px solid var(--border);
      transition: background 0.15s;
    }

    .student-item:last-child { border-bottom: none; }
    .student-item:hover { background: var(--purple-soft); }

    .student-item.hidden { display: none; }

    .student-num {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--purple-light);
      width: 24px;
      text-align: right;
      flex-shrink: 0;
    }

    .student-dot {
      width: 8px; height: 8px;
      border-radius: 50%;
      background: var(--purple-mid);
      flex-shrink: 0;
    }

    .student-name {
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--text-dark);
      letter-spacing: 0.01em;
    }

    /* ‚îÄ‚îÄ NO RESULTS ‚îÄ‚îÄ */
    .no-results {
      text-align: center;
      padding: 48px 24px;
      color: var(--text-muted);
      font-size: 0.9rem;
      display: none;
    }

    /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
    footer {
      background: var(--text-dark);
      color: rgba(255,255,255,0.5);
      text-align: center;
      padding: 24px;
      font-size: 0.82rem;
    }
    footer strong { color: var(--purple-light); }

    @media (max-width: 600px) {
      .controls { flex-direction: column; }
      .filter-select, .search-wrap { width: 100%; }
    }

    /* ‚îÄ‚îÄ ACTIVENESS MODAL ‚îÄ‚îÄ */
    .act-overlay { position: fixed; inset: 0; background: rgba(15,10,40,0.75); backdrop-filter: blur(8px); z-index: 100; display: flex; align-items: flex-end; justify-content: center; padding: 0; }
    .act-overlay.hidden { display: none; }
    .act-sheet {
      background: #1A1230; border-radius: 28px 28px 0 0; width: 100%; max-width: 500px;
      padding: 0 0 32px; animation: slideUp 0.3s cubic-bezier(0.34,1.56,0.64,1);
      border: 1px solid #2E2250; border-bottom: none;
    }
    @keyframes slideUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    .act-sheet-handle { width: 40px; height: 4px; background: #3D2E6B; border-radius: 999px; margin: 12px auto 0; }
    .act-sheet-head { padding: 20px 24px 16px; border-bottom: 1px solid #2E2250; display: flex; align-items: center; gap: 14px; }
    .act-avatar { width: 46px; height: 46px; border-radius: 50%; background: linear-gradient(135deg, #7C3AED, #5B21B6); display: flex; align-items: center; justify-content: center; font-size: 1.2rem; font-weight: 800; color: #fff; flex-shrink: 0; font-family: 'Playfair Display', serif; }
    .act-sheet-name { font-family: 'Playfair Display', serif; font-size: 1.1rem; font-weight: 700; color: #F1EEFF; line-height: 1.2; }
    .act-sheet-sub { font-size: 0.78rem; color: #7C6FA0; margin-top: 2px; }
    .act-close { margin-left: auto; width: 32px; height: 32px; border-radius: 50%; background: #241A3A; border: 1px solid #2E2250; color: #7C6FA0; cursor: pointer; font-size: 1rem; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
    .act-close:hover { color: #F1EEFF; }

    /* Progress bar */
    .act-progress { padding: 16px 24px; border-bottom: 1px solid #2E2250; }
    .act-prog-row { display: flex; justify-content: space-between; margin-bottom: 8px; }
    .act-prog-label { font-size: 0.78rem; color: #7C6FA0; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; }
    .act-prog-count { font-size: 0.88rem; font-weight: 700; color: #A78BFA; }
    .act-bar-wrap { background: #241A3A; border-radius: 999px; height: 8px; overflow: hidden; }
    .act-bar-fill { height: 8px; border-radius: 999px; background: linear-gradient(90deg, #8B5CF6, #A78BFA); transition: width 0.7s ease; }

    /* Stat items */
    .act-stats { padding: 14px 20px 0; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .act-stat-card { background: #241A3A; border: 1px solid #2E2250; border-radius: 14px; padding: 12px 14px; }
    .act-stat-top { display: flex; align-items: center; gap: 7px; margin-bottom: 8px; }
    .act-stat-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
    .act-stat-label { font-size: 0.72rem; color: #7C6FA0; font-weight: 600; text-transform: uppercase; letter-spacing: 0.04em; line-height: 1.2; }
    .act-stat-nums { display: flex; justify-content: space-between; align-items: flex-end; }
    .act-stat-times { font-size: 1.2rem; font-weight: 800; color: #F1EEFF; font-family: 'Playfair Display', serif; line-height: 1; }
    .act-stat-times span { font-size: 0.65rem; color: #7C6FA0; font-weight: 500; font-family: 'IBM Plex Sans', sans-serif; display: block; margin-top: 2px; }
    .act-stat-pts { text-align: right; }
    .act-stat-pts-val { font-size: 0.88rem; font-weight: 700; font-family: 'IBM Plex Mono', monospace; }
    .act-stat-pts-label { font-size: 0.6rem; color: #7C6FA0; margin-top: 1px; text-transform: uppercase; letter-spacing: 0.04em; }

    /* Info box */
    .act-info-box { margin: 14px 20px 0; background: rgba(139,92,246,0.08); border: 1px solid rgba(139,92,246,0.2); border-radius: 12px; padding: 10px 14px; }
    .act-info-title { font-size: 0.7rem; font-weight: 700; color: #A78BFA; text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 6px; }
    .act-info-rows { display: flex; flex-direction: column; gap: 3px; }
    .act-info-row { display: flex; justify-content: space-between; font-size: 0.72rem; color: #7C6FA0; }
    .act-info-row span:last-child { color: #A79FC0; font-family: 'IBM Plex Mono', monospace; font-weight: 600; }

    /* Indicator badge */
    .act-indicator { margin: 16px 24px 0; padding: 10px 16px; border-radius: 12px; font-size: 0.82rem; font-weight: 700; text-align: center; }
    .ind-super  { background: rgba(16,185,129,0.15); color: #10B981; border: 1px solid rgba(16,185,129,0.3); }
    .ind-active { background: rgba(139,92,246,0.15); color: #A78BFA; border: 1px solid rgba(139,92,246,0.3); }
    .ind-okay   { background: rgba(245,158,11,0.15); color: #F59E0B; border: 1px solid rgba(245,158,11,0.3); }
    .ind-not    { background: rgba(239,68,68,0.1);   color: #EF4444; border: 1px solid rgba(239,68,68,0.2); }

    .act-loading { text-align: center; padding: 40px; color: #7C6FA0; font-size: 0.9rem; }
    .act-spinner { display: inline-block; width: 22px; height: 22px; border: 2px solid #2E2250; border-top-color: #8B5CF6; border-radius: 50%; animation: spin 0.8s linear infinite; margin-bottom: 10px; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .student-item { cursor: pointer; }
    .student-item .student-name::after { content: ' ‚Ä∫'; font-size: 0.75rem; color: var(--purple-light); opacity: 0; transition: opacity 0.15s; }
    .student-item:hover .student-name::after { opacity: 1; }

  </style>
</head>
<body>

<header>
  <a href="index.html" class="back-btn">‚Üê Back</a>
  <h1>Student <span>List</span></h1>
  <p class="header-sub">English Quest ¬∑ SMA Negeri 6 Surakarta</p>
</header>

<svg class="wave" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 48" preserveAspectRatio="none">
  <path fill="#4C1D95" d="M0,32 C360,0 1080,64 1440,32 L1440,0 L0,0 Z"/>
  <path fill="#F9F7FF" d="M0,48 C360,16 1080,64 1440,32 L1440,48 Z"/>
</svg>

<!-- CONTROLS -->
<div class="controls">
  <div class="search-wrap">
    <input type="text" id="searchInput" placeholder="Search student name..." oninput="filterStudents()"/>
  </div>
  <select class="filter-select" id="classFilter" onchange="filterStudents()">
    <option value="">All Classes</option>
    <option value="XE-1">XE-1</option>
    <option value="XE-4">XE-4</option>
    <option value="XE-5">XE-5</option>
    <option value="XE-6">XE-6</option>
    <option value="XE-7">XE-7</option>
    <option value="XE-8">XE-8</option>
    <option value="XE-9">XE-9</option>
    <option value="XE-10">XE-10</option>
    <option value="XE-11">XE-11</option>
  </select>
  <div class="count-badge" id="countBadge">Loading...</div>
</div>

<main id="mainContent">

  <div id="noResults" class="no-results">No students found matching your search.</div>

  <!-- XE-1 -->
  <div class="class-section" data-class="XE-1">
    <div class="class-header">
      <span class="class-badge">XE-1</span>
      <span class="class-count" id="count-XE-1"></span>
    </div>
    <div class="student-list" id="list-XE-1"></div>
  </div>

  <!-- XE-4 -->
  <div class="class-section" data-class="XE-4">
    <div class="class-header">
      <span class="class-badge">XE-4</span>
      <span class="class-count" id="count-XE-4"></span>
    </div>
    <div class="student-list" id="list-XE-4"></div>
  </div>

  <!-- XE-5 -->
  <div class="class-section" data-class="XE-5">
    <div class="class-header">
      <span class="class-badge">XE-5</span>
      <span class="class-count" id="count-XE-5"></span>
    </div>
    <div class="student-list" id="list-XE-5"></div>
  </div>

  <!-- XE-6 -->
  <div class="class-section" data-class="XE-6">
    <div class="class-header">
      <span class="class-badge">XE-6</span>
      <span class="class-count" id="count-XE-6"></span>
    </div>
    <div class="student-list" id="list-XE-6"></div>
  </div>

  <!-- XE-7 -->
  <div class="class-section" data-class="XE-7">
    <div class="class-header">
      <span class="class-badge">XE-7</span>
      <span class="class-count" id="count-XE-7"></span>
    </div>
    <div class="student-list" id="list-XE-7"></div>
  </div>

  <!-- XE-8 -->
  <div class="class-section" data-class="XE-8">
    <div class="class-header">
      <span class="class-badge">XE-8</span>
      <span class="class-count" id="count-XE-8"></span>
    </div>
    <div class="student-list" id="list-XE-8"></div>
  </div>

  <!-- XE-9 -->
  <div class="class-section" data-class="XE-9">
    <div class="class-header">
      <span class="class-badge">XE-9</span>
      <span class="class-count" id="count-XE-9"></span>
    </div>
    <div class="student-list" id="list-XE-9"></div>
  </div>

  <!-- XE-10 -->
  <div class="class-section" data-class="XE-10">
    <div class="class-header">
      <span class="class-badge">XE-10</span>
      <span class="class-count" id="count-XE-10"></span>
    </div>
    <div class="student-list" id="list-XE-10"></div>
  </div>

  <!-- XE-11 -->
  <div class="class-section" data-class="XE-11">
    <div class="class-header">
      <span class="class-badge">XE-11</span>
      <span class="class-count" id="count-XE-11"></span>
    </div>
    <div class="student-list" id="list-XE-11"></div>
  </div>

</main>

<footer>
  <p>¬© 2025 <strong>English Quest</strong> ¬∑ SMA Negeri 6 Surakarta ¬∑ Built with ‚ù§Ô∏è by <strong>LaksMedia</strong></p>
</footer>

<script>
const data = {
  "XE-1": ["ANGGITA ANASTASYA PUTRI","ANNISA FEBRIYANTI AZIZAH","APRILIA GALUH PURNAMASARI","ARDHINDA NAOMI PUTRI","AUREL ANNASTASYA","AVIS OMEYRO SETIAWAN","BAIM DWI FANO","CLARESTA JANET VOISHELA","DANIEL PUTRA WAHANA","DEAN JOSHUA","DEVANNNDRA JAVAS NARARYA","DINDA KAYLA","ELLENA ALLYSA SETIANANG","ELVANUELLE EDGAR PUTRA JAYANTO","EXCEL JUAN PRATAMA","FAUZAN DAVIN PUTRA YUNANTO","GADIS LINTANG WAHYU ASIH","GANDRUNG JESHUA CANGGIH CAKSANA","GRACIA LARASATI","GRACIA THEOVANI","HEKA TRAH VENDIKA","HELENA KRISTIANINGRUM","KRISTINA KRISEL WAHYU PRATIWI","LINGGOM GATAN NADEAK","MELINDA PATRICIA","MICHELLE OLIVIA MAGDALENA","NA ILLA INGGIT MEYSANDRA","NATANIA PRATIWI","NATASHA DEANDRA KRISHNA PUTRI","RAPHAEL GRISTO MAYNARDIVE","RUTH CLARICE AURELLIA BERNADIGTA","ZEFANYA MEINSHA HANDAYANI","ZEFANYA PUTRI MAHARANI PRAMONO"],
  "XE-4": ["ADITIYA PUTRA PRATAMA","ALIF MOCHAMMAD RIZQI YUSNIAR","ALVIANO DIMAS PUTRA PRADIPTA","ALZENA ZAKYA","ANITA FEBRIAN KHOIRUNISA","ARENZA DWI RANADIKA","ARINTA KUSUMA WARDANI WIDIYANTORO","AULIA KARTIKA AYUNIDIA","AURELIA SHABRINA INTAN SUBROTO","CHAYYIRA GESTYLANIA EL-FIRDAUS","DELYLA NATASYA APRYAWAN","DHIMAS ARYA PRADANA","DIMAS ALFIN NURPRASETYO AJI","DIMAS BAGUS NARENDRA","DWI PUSPITASARI","ELENNA MYRA ALEXA","GALEN RAMADHAN SRI WIDORO","GEMILANG WISNU ANGGORO","GRISELDA AMINAHISYA CETTA","ITSNAINI SYAFAATUN NUR JANNAH","JIVA TIARA DEVANI","KALISYA RATRI NDARU PRAMANASARI","KHAYANA RARA DUHITA","LIANDRA MARVELINO PUTRA ALIANTO","MUHAMMAD NAUFAL RAYA RAMADHANI","NASYWA PUTRI YASHETA","NIDA MEI NUR MADINA","PHANG INDAH MULIA PERMATA HATI","RAISSA ANINDYA KUNARYA","RAKA ALFARIZI","RIANA PUTRI OKTAVIANI","SARIYANTO","VRISQA JOFAN INSANI","ZAHRA KHOIRUN NISA","ZALFA AULIA SALSABILA","ZHEVA PUTRA WARDANA"],
  "XE-5": ["AFRAND ATHA NAYAKA","AIRA KARUNIA PRATIWI","ALTIFFANY ZIVANA KANAYA TABITHA","ALVINO ARIEL MARTHA PUTRA","AZKA REZA RAMADHAN","AZ'ZAHRA SETYAWAN","DASYA GILANG PRAYITNA PUTRA","DEWI CAHYA NINGRUM","FAKHRI RAMADHAN PUTRA PRATAMA","FATHIYAH SAFA SABITA","FATIN ILMAA SYAKIRA","FENDI SETIYAWAN","GHANIYA RATNADUHITA","HALWA TRI SALSABILA","HARA AKASH BAHADRIKA DHIAULHAQ","ILYAS SUJA'I","KEIHNA NABILLA SYAFANI","KURNIA WENING PRATIWI","LINTANG ARDINAR","MUHAMMAD FARHAN KHALISH MAJID","MUHAMMAD MAULANA AL GHIFARY","NABILA AURELIA PUTRI","NABILA NUR AISYAH","NABILA RAFIKA KIRANA SARI","NADIRA DILA ANASTASYA","NAYLA JOVITA MAHARANI","OCTARA YURA ARUNA","OKTAVIA DWIHASTUTI","RINI TRI DANISWARI","SUCIATI","TASYA NUR APRILIA","VALDIS DITO OKTAVIANTO PUTRA PRATAMA","VEGA MOHAMAD ADYTIA","VINCENT ALAN SYAHREZA","ZAHRA ELVARETTA PUTRI MARZHA","ZAHWA ZHAKIRNA RAHMADANI KYOSGOE"],
  "XE-6": ["AILIN RAISSA LUTHFIYAH","ARFARYZKI MUHAMMAD RAMADHAN","ATHAYA JINAN KAMILATUNNISA","AZKA REZQIE RAMADHAN","BINTON BINGAR BASKORO","CLARISSA NATHANNYA SALSABILA","DEKAYLOVIOLA GLADYSHEZA M","DEWANGGA ZAHIRUDDIN RASYID HERNINTO","DIMAS DAUD FEBRIANTO","DYAH RENANING PINASTI","EL NATA WIJAYA","ESA CHELA SABRILIA","FADHIEL IRFAN HARTANTO","FARDAN EKA SAPUTRA","FAUZIA NAIMA KHASANAH","HANA PUTRI KIRANA","ILYAS AKMAL NUR FALAH","MAYA JHOVINSHA","MOHAMMAD CEYSAR ADHI PRATAMA","MUHAMMAD CHEVIN ABDUL AZIZ","MUHAMMAD HARIST ZAIDAN","MULIAXZA CAHYA NABILLAH","MUSTIKA CITRA NUGRAHANTI","NABILA NANDA BERLIAN","NAFA SYAIKAN CONCEKA","NAJWA SAFIRA HUSEIN","NARYAMA DZAKY ALVARO","NAUFAL ABQORY SUSANTO","NEYLA KAMIL ATUTININGTYAS","RAKHMA NURI KHAIRUNNISA","REVALINA AULYA KUSUMA","SEKAR TIARA AULIA","SYIFA ISKARIMA AULIA RAHMA","TRIA LATIFA LEGOWATI","VITO MIO SARWAHITA","WILDAN NORIS ABDURROHMAN"],
  "XE-7": ["ADINDA AULIYA KUSUMA DEWI","ALISA RAHMAWATI","ARIN KENCANA ARUM","ARKAN RAMADHAN PURDIANSYAH","ASHANTY NUR OCTAVIA","AURELIA WAHYU PUTRI","AZZHA LUTHFIYAH PUTRIANA","DHI'FAN AGHNAT DZULFIQAR PUTRA","DIAH KUSUMAWARDANI","DZILA DWI DZIHNI","ERIKA DWI PRATIWI","FARAH PUTRI SALSABILLA","HAMZAH ABDUL HAKIM","JEMIMA KINARA IZZATA","JIHAN AYU OKTAVIANA","LUTHFYA FERNI QONITA","MAHESA RESTU MAULANA","MARSYA NUGRAHENI","MELVY PUTRI ARDINATA","MUHAMMAD ALGHAFA ARDIANSYAH","MUHAMMAD ILHAM FIRMANSYAH","NAKEISHA ILSE FIDELIA FAUSTINE","NAUFAL AZMI SAFARAZ HERIANSYAH","PRITA NAYLA PUTRI","PURI MAHGHALI RISQI NIKTAMAR","RAFA MULEN SAMBOGA","RANDI BAGUS ADITYA","REHAN DIAS SETIAWAN","SAHITHA ASTHA WIBOWO","SANGGITA CITRA NUGRAHENI","SERAVINA INDAH ANJELINA","SUCI LARASATI","WILDAN PRADIPTA","ZAHROTUS SHITA RETNANI","ZAKKI KEANU ALBRIAN","ZALFAN HAIDAR WIDANA"],
  "XE-8": ["ALLAN YOGIANTARA","ANINDIA ARIMBI","ANNISA NUR RAHMAH","AQEELA NADIA PERWITHA PURISANT","ARDHIN FATIMAH AZZAHRA","ASTVAT ERETA MALKUTHA HR","ATHIFA AURELIA","DAVIN KHAIRUL AZAM","DESFINA KURNIA ARBITA","DITO RHAMADIANTO","DUAN ADIYA UTAMA","ELLISA MELATI PUTRI","EVAN NANDANA PUTRA PAMBUDI","FADHIL DAMAR RAJENDRA","FADILLA ALISYA PUTRI","FARID DZULFIKAR HARYANTO","GADIS AMELIA AKHIRA","GIANDRA NAYOGI","GIVTA KHUSNUL KHOTIMAH","HAFIZ LUCKY PRADYAWAN","INTAN JULIANI","JESSICA MAHARANI","MARSHA ELYCIA PUTRI OKTAVIANANDA","MUHAMMAD ABDUL BASITH MUGHNY","MUHAMMAD FAUZAN ADHIMA AL-HABSYI","MUHAMMAD REZAUL FATTAH","MUTIARA NUR AZIZAH","NABIL ARSHAQ GHOFRAN HAKEEM","NAFIZA MAYYADA FARHANI","NAJWA AZZAHRA MELANIE PUTRI","REVA PUTRI NATAMENGGALA","REZKY AGUNG RAMADHAN","SAFA DWI ANGGITA","SAFARAZ RAZIQ YUSTIAN","SATRIO FAWWAZ BAGASKORO PUTRO","TIKA INDI HAPSARI"],
  "XE-9": ["ABDULLAH AZZAM AL-KAELANI","ADENA CALLYSTA NAJLA","ADI TEGAR AHMAD THALIBAN","ADITYA DANU PRAKOSO","AFIRA CARISSA HUMAIRA","ALFIANA NUR KURNIAWATI","ALYSCO FAJAR KURNIAWAN","AMALIA ALTHAFUNNISA","ANDREAN LISTO WAHYU PUTRA","ANINDITA PRAMESWARI","ANISSA KHAMILA ALTHAFUNISA","ANNISA QORI'ATUS SHOLIKHAH","APSARI NUR MAULIDA","AUERELLA RONA PURNAMA","AURELLIA FARRA ANDINI","AVISSA RIVAI","AYESHA HUMAYRA PUTRI ANDINA","BUDHI SURYA ATMAJA","CLARETTA AULIA WARDANI","ICA ERNIASIFA","IMELDA PUTRI","MAHENDRA FADLI PRADANA","MUHAMAD RAFFA ADITYA PRASETYO","MUHAMMAD IQBAL AL QUDSI","MUHAMMAD MUFQI TAQIYUDDIN","MUHAMMAD RENDHY SEPTIAWAN","NABILA ZALFA THALITA MAILAN","NADIA AZALIA ADI MAHARANI","NAZHIR HISYAM AMINUDDIN","QUEEN XENIA ALKHALIFI","REVALINA JULIYANTI","RHEALYTA CHINTA","SABRINA ADRIYANINGTYAS SUPRIADI","SABIAN PUTRA ARDIANSYAH","SEKAR ARUM PRAWESWARI AURANGGA KURNIAWIDI","VERLITA CHANTIKA SARI"],
  "XE-10": ["A LUNA DESTHIRTY","ADIFFA MIKAIL","ADINDA AULIA PUTRI","ADINDA AULIA PUTRI","AISYAH BILQIS SAFA","ALDAN SATRIA PAMUNGKAS","ALISSA DEWI MARANTI","ALLENZHA DIODA ARKADHANI","ALVIANTO RIZQ NUGROHO","ANNISA ANGELICA FEBRIANI","ARIEF RACHMAN HAKIM","ATAYA CALLISTA ANINDYA","AURA ARYA SAFIRA","BILQIS REINATA DWIANTI","CAHYA ASGY OKTAVIA","DAVINA AULIA PUTERI KURNIAWAN","DEAN MARCELLO ROBERT","DHIRGHAM FADHIL MAULANA SAKHI","DIAN KIANA KASIH","FAIZ AKBAR NURHASAN PRABOWO","FARAH ALIFAH KHAIRUNISA","GHANIYYA SHIRIN MAIZA HUMAYYUN","GHORA SWARA GISHTARA SUHERMAN","HANIS NUR FATHURAHMAN","HAURA AZZAFRIKA MESSIANA PUTRI","JAGAD SAKSENA PUTRA WIBOWO","KAYRA LATHISA KUSUMA KATJONG","MARVIN ARDYAN SYAHPUTRA","MUHAMMAD NAUFAL DHIYA U'L HAQ","NABILA NUR AIVI","PUAN PUTRI KHUSNUL KHOTIMAH","RIKA PRAMUKTI JATI","SAFA ZAHRA HAFIDAH","VELAND ZAHRO AGTADO RIYADI","YUSTINA MELANIE PUTRI","ZAHRA MUTIA AQSHA"],
  "XE-11": ["ABELIA DWI SAPUTRI","ADINDA AULIA PUTRI","ALDINO EKA RAMADHAN","ALIFA AJENG DIRGANTARI","ALTINOGA RIZKI SAPUTRA","ALVINO SATRYO PRATAMA","ARKHANIA PRAMESTHI REINATA INTAN LISTYONINGSIH","ATAYA CALLISTA ANINDYA","DAHAYU CHINDAGA ALINE","DHIYA AULIYA KHAIRUNNISA","EGI ZANIT PUTRI WURISMA","FIFIAN KHAIRUNISA DANISWORO","FRISSA EKA RIDWAN","GILANG JANU PRASETYO","HANAN KHOIRUL AHNAF","IRFAN TRI WAHYUDI","IZDAM RANGGA SAMUDRA","KHUMAYRA AULIA ZAHRA","LIDIYA HUMAIRA JATMIKO","MALIK IBRAHIM","MAZAYA CALLULA NEYSA","MIFTA SABRINA MULIA","MUHAMMAD ALFIAN FIRANSYAH","MUHAMMAD RAIHAN NAFIS SALAM","NABILLAH THALITA VALDA PRABOWO","NANDA WIDYA ANGGRAINI","PUTRI MAHARANI PAUWAE","RENATA SULISTIANA","RIZKY AHKBAR PURNOMO","SABIAN DAFFA WARDOYO","SATRIA RIZKY EXOTIX","SOFIA INAS LABIBAH","SRI LESTARI MAHANANI","SYAUQI ABDAN","THEONA KALILA NARESWARI","ZULFIANA PUTRI IMANISYAH"]
};

const classes = ["XE-1","XE-4","XE-5","XE-6","XE-7","XE-8","XE-9","XE-10","XE-11"];

// Render all students
classes.forEach(cls => {
  const list = document.getElementById('list-' + cls);
  const students = data[cls];
  students.forEach((name, i) => {
    const item = document.createElement('div');
    item.className = 'student-item';
    item.dataset.name = name.toLowerCase();
    item.dataset.class = cls;
    item.innerHTML = `
      <span class="student-num">${i + 1}</span>
      <span class="student-dot"></span>
      <span class="student-name">${name}</span>
    `;
    item.addEventListener('click', () => openActModal(name, cls));
    list.appendChild(item);
  });
  document.getElementById('count-' + cls).textContent = students.length + ' students';
});

updateCount();

function filterStudents() {
  const query = document.getElementById('searchInput').value.toLowerCase().trim();
  const cls = document.getElementById('classFilter').value;
  let visible = 0;

  classes.forEach(c => {
    const section = document.querySelector(`.class-section[data-class="${c}"]`);
    const items = section.querySelectorAll('.student-item');
    let sectionVisible = 0;

    items.forEach(item => {
      const nameMatch = !query || item.dataset.name.includes(query);
      const classMatch = !cls || item.dataset.class === cls;
      if (nameMatch && classMatch) {
        item.classList.remove('hidden');
        sectionVisible++;
        visible++;
      } else {
        item.classList.add('hidden');
      }
    });

    section.style.display = (cls && cls !== c) ? 'none' : (sectionVisible === 0 && query ? 'none' : '');
  });

  document.getElementById('noResults').style.display = visible === 0 ? 'block' : 'none';
  updateCount(visible);
}

function updateCount(n) {
  const total = n !== undefined ? n : Object.values(data).reduce((a, b) => a + b.length, 0);
  document.getElementById('countBadge').textContent = total + ' students';
}


// ‚îÄ‚îÄ ACTIVENESS STATS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const SCORES_API = 'https://script.google.com/macros/s/AKfycbxBTC4vnFB3A73QwThdRxrUruvUNZRlpwwLFBjt5C0cJGIh8wz461ZCn3b9Y6wWPpyAGg/exec';
const activenessCache = {};

const ACTS = [
  { key: 'VocabularyBox',    label: 'Vocabulary Box',    color: '#8B5CF6' },
  { key: 'Answering',        label: 'Answering',         color: '#3B82F6' },
  { key: 'Presenting',       label: 'Presenting',        color: '#10B981' },
  { key: 'DoingTaskOnTime',  label: 'Doing Task On Time',color: '#F59E0B' },
  { key: 'HelpingHand',      label: 'Helping Hand',      color: '#EC4899' },
];

// Class key mapping: XE-1 ‚Üí XE1 for API
function toApiClass(cls) { return cls.replace('-', ''); }

async function apiGet(params) {
  const url = SCORES_API + '?' + new URLSearchParams(params);
  try { const res = await fetch(url); if (res.ok) return await res.json(); } catch(e) {}
  return new Promise((resolve, reject) => {
    const cb = 'cb_' + Date.now() + '_' + Math.random().toString(36).slice(2);
    const p  = { ...params, callback: cb, _t: Date.now() };
    const script = document.createElement('script');
    script.async = true;
    const timer = setTimeout(() => { cleanup(); reject(new Error('Timeout')); }, 20000);
    function cleanup() { delete window[cb]; try { if (script.parentNode) script.parentNode.removeChild(script); } catch(e){} clearTimeout(timer); }
    window[cb]     = d => { cleanup(); resolve(d); };
    script.onerror = () => { cleanup(); reject(new Error('Network error')); };
    script.src = SCORES_API + '?' + new URLSearchParams(p);
    (document.head || document.body).appendChild(script);
  });
}

async function openActModal(name, cls) {
  const apiCls = toApiClass(cls);
  document.getElementById('actName').textContent    = name;
  document.getElementById('actSub').textContent     = cls + ' ¬∑ Activeness Stats';
  document.getElementById('actAvatar').textContent  = name[0].toUpperCase();
  document.getElementById('actBody').innerHTML      = '<div class="act-loading"><div class="act-spinner"></div><br/>Loading stats...</div>';
  document.getElementById('actOverlay').classList.remove('hidden');
  document.body.style.overflow = 'hidden';

  try {
    // Use cache per class
    let classData = activenessCache[apiCls];
    if (!classData) {
      classData = await apiGet({ action: 'getAllActiveness', className: apiCls });
      if (!classData.error) activenessCache[apiCls] = classData;
    }
    if (classData.error) { document.getElementById('actBody').innerHTML = '<div class="act-loading">Could not load stats.</div>'; return; }

    // Find student by name (case-insensitive)
    const student = classData.students.find(s => s.name.toLowerCase() === name.toLowerCase());
    if (!student) { document.getElementById('actBody').innerHTML = '<div class="act-loading">Student stats not found.</div>'; return; }

    // Update avatar with nickname if available
    if (student.nickname) document.getElementById('actAvatar').textContent = student.nickname[0].toUpperCase();

    const total   = (student.VocabularyBox||0) + (student.Answering||0) + (student.Presenting||0) + (student.DoingTaskOnTime||0) + (student.HelpingHand||0);
    const indClass = student.Indicator.includes('Super') ? 'ind-super' : student.Indicator.includes('Active (+') && !student.Indicator.includes('Not') ? 'ind-active' : student.Indicator.includes('Okay') ? 'ind-okay' : 'ind-not';
    const barPct  = Math.min(100, Math.round((total / 50) * 100)); // 50 = rough max

    // Point rules per activity
    const pointRules = {
      VocabularyBox:    { pts: 1,  unit: 'pt each',  info: 'Each vocab box submission' },
      Answering:        { pts: 2,  unit: 'pts each',  info: 'Each question answered' },
      Presenting:       { pts: 5,  unit: 'pts each',  info: 'Each presentation done' },
      DoingTaskOnTime:  { pts: 2,  unit: 'pts each',  info: 'Tasks submitted on time' },
      HelpingHand:      { pts: 1,  unit: 'pt each',  info: 'Helping classmates' },
    };

    const statsHtml = ACTS.map(a => {
      const times = student[a.key] || 0;
      const rule  = pointRules[a.key];
      const pts   = times * rule.pts;
      return `<div class="act-stat-card">
        <div class="act-stat-top">
          <div class="act-stat-dot" style="background:${a.color}"></div>
          <div class="act-stat-label">${a.label}</div>
        </div>
        <div class="act-stat-nums">
          <div class="act-stat-times">${times}<span>times</span></div>
          <div class="act-stat-pts">
            <div class="act-stat-pts-val" style="color:${a.color}">+${pts}</div>
            <div class="act-stat-pts-label">points</div>
          </div>
        </div>
      </div>`;
    }).join('');

    document.getElementById('actBody').innerHTML = `
      <div class="act-progress">
        <div class="act-prog-row">
          <div class="act-prog-label">Total Points</div>
          <div class="act-prog-count">${total} pts</div>
        </div>
        <div class="act-bar-wrap"><div class="act-bar-fill" style="width:${barPct}%"></div></div>
      </div>
      <div class="act-stats">${statsHtml}</div>
      <div class="act-info-box">
        <div class="act-info-title">üìñ How points work</div>
        <div class="act-info-rows">
          ${ACTS.map(a => `<div class="act-info-row"><span>${a.label}</span><span>√ó${pointRules[a.key].pts} ${pointRules[a.key].unit}</span></div>`).join('')}
        </div>
      </div>
      <div class="act-indicator ${indClass}" style="margin-top:14px">${student.Indicator || '‚Äî'}</div>`;

  } catch(e) {
    document.getElementById('actBody').innerHTML = '<div class="act-loading">Failed to load stats.</div>';
  }
}

function closeActModal(e) {
  if (e && e.target !== document.getElementById('actOverlay')) return;
  document.getElementById('actOverlay').classList.add('hidden');
  document.body.style.overflow = '';
}

document.addEventListener('keydown', e => { if (e.key === 'Escape') { document.getElementById('actOverlay').classList.add('hidden'); document.body.style.overflow = ''; } });

</script>


<!-- ACTIVENESS STATS MODAL -->
<div class="act-overlay hidden" id="actOverlay" onclick="closeActModal(event)">
  <div class="act-sheet" id="actSheet">
    <div class="act-sheet-handle"></div>
    <div class="act-sheet-head">
      <div class="act-avatar" id="actAvatar">?</div>
      <div>
        <div class="act-sheet-name" id="actName">‚Äî</div>
        <div class="act-sheet-sub" id="actSub">‚Äî</div>
      </div>
      <button class="act-close" onclick="closeActModal()">‚úï</button>
    </div>
    <div id="actBody">
      <div class="act-loading"><div class="act-spinner"></div><br/>Loading stats...</div>
    </div>
  </div>
</div>

</body>
</html>
